<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Payment Failed - FastAPI Payment Service</title>
    <link rel="stylesheet" href="{{ url_for('static', path='/styles.css') }}">
    <link rel="icon"
        href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>‚ùå</text></svg>">
</head>

<body>
    <div class="container">
        <div class="error-icon">‚ùå</div>
        <h1 class="error-title">Payment Failed</h1>
        <p style="color: #666; margin-bottom: 30px; font-size: 1.1rem;">
            {{ error or "Your payment could not be processed at this time." }}
        </p>

        {% if transaction %}
        <div class="transaction-details">
            <h3 style="margin-bottom: 20px; color: #333; text-align: center;">Transaction Details</h3>

            <div class="detail-row">
                <span class="detail-label">Reference:</span>
                <span class="detail-value">{{ transaction.reference }}</span>
            </div>

            <div class="detail-row">
                <span class="detail-label">Email:</span>
                <span class="detail-value">{{ transaction.email }}</span>
            </div>

            <div class="detail-row">
                <span class="detail-label">Amount:</span>
                <span class="detail-value">‚Ç¶{{ "%.2f"|format(transaction.amount / 100) }}</span>
            </div>

            <div class="detail-row">
                <span class="detail-label">Status:</span>
                <span class="detail-value" style="color: #dc3545; font-weight: 600;">
                    {{ transaction.status.title() }}
                </span>
            </div>

            {% if transaction.created_at %}
            <div class="detail-row">
                <span class="detail-label">Date:</span>
                <span class="detail-value">{{ transaction.created_at.strftime('%B %d, %Y at %I:%M %p') }}</span>
            </div>
            {% endif %}
        </div>
        {% endif %}

        <div
            style="background: #f8d7da; border: 1px solid #f5c6cb; border-radius: 10px; padding: 20px; margin: 20px 0;">
            <p style="color: #721c24; margin: 0; font-weight: 500;">
                üí° <strong>What to do next:</strong><br>
                ‚Ä¢ Check your payment method details<br>
                ‚Ä¢ Ensure you have sufficient funds<br>
                ‚Ä¢ Try again or contact support
            </p>
        </div>

        <div style="margin-top: 30px;">
            <a href="/" class="home-link" style="margin-right: 20px;">‚Üê Try Again</a>
            <a href="mailto:support@example.com" class="home-link">Contact Support</a>
        </div>
    </div>

    <script>
        // Auto-scroll to top
        window.scrollTo(0, 0);

        // Add shake animation for error
        setTimeout(() => {
            const container = document.querySelector('.container');
            container.style.animation = 'shake 0.5s ease-in-out';
        }, 300);

        // Define shake animation
        const style = document.createElement('style');
        style.textContent = `
            @keyframes shake {
                0%, 100% { transform: translateX(0); }
                25% { transform: translateX(-5px); }
                75% { transform: translateX(5px); }
            }
        `;
        document.head.appendChild(style);
    </script>
</body>

</html>